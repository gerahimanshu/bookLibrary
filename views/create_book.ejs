<!DOCTYPE html>
<html lang="en">

<head>

    <% include header %>

</head>

<body>

   
    <hr>
    <hr>
    <!-- Page Content -->
    <div class="container">

        <div class="row">

    <form class="form-horizontal" id="createBookForm" action="/create_book" method="post" >
        <fieldset>
            <legend>Create Book</legend>
            <div class="form-group">
                <label for="title" class="col-lg-2 control-label">Title: </label>
                <div class="col-lg-10">
                    <input class="form-control" id="title" type="text" name="title" placeholder="Enter Title of Book">
                </div>
            </div>
            <div class="form-group">
                <label for="description" class="col-lg-2 control-label">Description: </label>
                <div class="col-lg-10">
                    <input class="form-control" id="description" type="text" name="description" placeholder="About the book">
                </div>
            </div>
            <div class="form-group">
                <label for="isbn" class="col-lg-2 control-label">ISBN: </label>
                <div class="col-lg-10">
                    <input class="form-control" id="isbn" type="text" name="isbn" placeholder="Enter ISBN">
                </div>
            </div>
            <div class="form-group">
                <label for="cover_image" class="col-lg-2 control-label">Cover Image: </label>
                <div class="col-lg-10">
                    <input type="file" name="image">
                </div>
            </div>
            <div class="form-group">
                <label for="author" class="col-lg-2 control-label">Author: </label>
                <div class="col-lg-10">
                    <select name = "author">
                    <% 
                    for(var i= 0;i<authors.length;i++){
                        var author = authors[i];
                
                    %> 
                    <option value=<%=author._id%>> <%=author.name%> </option>
                 
                    <% } %>
                     </select><br>
                </div>     
            </div>
            <div class="form-group">
                <label for="category" class="col-lg-2 control-label">Category: </label>
                <div class="col-lg-10">
                     <select name = "category"> 
                    <% for(var j= 0;j<categorie.length;j++){
                        var category = categorie[j];
                
                    %> 
                    <option value=<%=category._id%>><%=category.name%></option>
                 
                    <% } %>
                    </select><br>
                </div>
            </div>       
            <div class="form-group">
              <div class="col-lg-10 col-lg-offset-2">
                <button type="reset" class="btn btn-default">Cancel</button>
                <button type="button" class="btn btn-primary" id="submit" value="Submit">Submit</button>
              </div>
            </div>
      </fieldset>
    </form>
        </div>

        <hr>

        <!-- Footer -->
        <footer>
            <div class="row">
                <div class="col-lg-12">
                 
                </div>
            </div>
        </footer>

    </div>
    <!-- /.container -->

    <script>

        (function(window, $, localStorage){
                $(document).ready(function() {

                    addAuthorizationHeader();

                    submitClickEvent();
                });

                /**
                 * Add authorization header for each form post method call.
                 */
                var addAuthorizationHeader = function(){
                    $.ajaxSetup({
                        beforeSend: function (xhr)
                        {
                           xhr.setRequestHeader("Authorization","Token token=\"" +  localStorage.getItem("access_token")  +"\"");        
                        }
                    });
                };

                /**
                 * [submitClickEvent description]
                 * @return {[type]} [description]
                 */
                var submitClickEvent = function(){
                    //hang on event of form with id=myform
                    $("#submit").submit(function(e) {
                        /*//prevent Default functionality
                        e.preventDefault();

                        //get the action-url of the form
                        var actionurl = e.currentTarget.action;

                        //do your own request an handle the results
                        $.ajax({
                                url: actionurl,
                                type: 'post',
                                dataType: 'application/json',
                                data: $("#createBookForm").serialize(),
                                success: function(data) {
                                    console.log(data);
                                    window.load = "/errorpage.html";
                                }
                        });
*/
                    });
                };

        })(window, $, localStorage);

    </script>

</body>

</html>
